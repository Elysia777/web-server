import{c as g,f as y,d as V}from"./personServ-b89a8be2.js";import{m as c,a as v}from"./messageBox-2cdc502c.js";import{d as k,_ as B,n as d,c as f,e as i,s as t,x as o,o as h,y as m,p as F,F as C,q as I,G as L}from"./index-284e2513.js";const $=k({data:()=>({genderList:[{value:"1",title:"男"},{value:"2",title:"女"}],studentId:null,dataList:[]}),async created(){const a=this.$route.query.studentId;a!=null&&(this.studentId=parseInt(a.toString())),this.studentId!=null&&(this.dataList=await g(this.studentId))},methods:{addRow(){this.dataList.push({studentId:this.studentId})},async saveItem(a){const u=this.dataList[a],s=await y(u);s.code==0?c(this,"保存成功"):c(this,s.msg)},async deleteItem(a){if(!await v("确认删除当前成员吗?"))return;const s=await V(this.dataList[a].memberId);s.code==0?(c(this,"删除成功"),this.dataList.splice(a,1)):c(this,s.msg)}}}),D={class:"base_form"},E=i("div",{class:"base_header"},[i("div",{class:"blue_column"}),i("div",{class:"base_title"},"学生家庭成员信息")],-1),U={class:"base_query_oneLine"},x={class:"query_left"},z={class:"table-content"};function q(a,u,s,M,S,N){const _=d("el-button"),n=d("el-table-column"),r=d("el-input"),p=d("el-option"),b=d("el-select"),w=d("el-table");return h(),f("div",D,[E,i("div",U,[i("div",x,[t(_,{class:"commButton",size:"mini",onClick:u[0]||(u[0]=e=>a.addRow())},{default:o(()=>[m("添加一行")]),_:1})])]),i("div",z,[t(w,{data:a.dataList,size:"mini","header-cell-style":{color:"#2E2E2E",fontSize:"10px",fontWeight:"400",background:"rgb(242,242,242)"},"row-style":{height:"10px"},"cell-style":{padding:"2px"},style:{width:"100%"}},{default:o(()=>[t(n,{label:"序号",fixed:"left",width:"50",color:"black"},{default:o(e=>[m(F(e.$index+1),1)]),_:1}),t(n,{label:"关系",width:"150",color:"black",align:"center"},{default:o(e=>[t(r,{modelValue:e.row.relation,"onUpdate:modelValue":l=>e.row.relation=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"姓名",width:"150",color:"black",align:"center"},{default:o(e=>[t(r,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"性别",width:"150",color:"black",align:"center"},{default:o(e=>[t(b,{modelValue:e.row.gender,"onUpdate:modelValue":l=>e.row.gender=l,placeholder:"请选择性别",style:{width:"90%"}},{default:o(()=>[(h(!0),f(C,null,I(a.genderList,l=>(h(),L(p,{key:l.value,label:l.title,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"年龄",width:"100",color:"black",align:"center"},{default:o(e=>[t(r,{modelValue:e.row.age,"onUpdate:modelValue":l=>e.row.age=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"单位",width:"150",color:"black",align:"center"},{default:o(e=>[t(r,{modelValue:e.row.unit,"onUpdate:modelValue":l=>e.row.unit=l,style:{width:"90%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(n,{label:"操作",width:"150",color:"black",align:"center"},{default:o(e=>[t(_,{class:"commButton",size:"mini",onClick:l=>a.saveItem(e.$index)},{default:o(()=>[m("保存")]),_:2},1032,["onClick"]),t(_,{class:"commButton",size:"mini",onClick:l=>a.deleteItem(e.$index)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","header-cell-style"])])])}const T=B($,[["render",q]]);export{T as default};
