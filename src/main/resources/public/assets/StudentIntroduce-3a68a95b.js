import{e as B}from"./index-c9644a46.js";import{d as E,l as I,m as v,_ as w,n as m,c as o,e as t,p as s,F as f,q as L,s as u,x as r,o as h,y as _,z as F,A as C}from"./index-284e2513.js";import{g as A,a as b,b as S}from"./infoServ-321476ae.js";import{m as d}from"./messageBox-2cdc502c.js";const c=B,x=E({data:()=>({authHeader:I(),valid:!1,uploadIsLoading:!1,studentId:null,imgStr:"",info:{},feeList:[],markList:[],scoreList:[],nameRules:[],emailRules:[]}),async created(){let e=await A(this.studentId);this.info=e.data.info,this.studentId=this.info.studentId,this.feeList=e.data.feeList,this.markList=e.data.markList,this.scoreList=e.data.scoreList,e=await b("photo/"+this.info.personId+".jpg"),this.imgStr=e.data,this.drawEcharts()},mounted(){},methods:{drawEcharts(){c.init(document.getElementById("myChartBar")).setOption({title:{text:"日常消费"},tooltip:{},xAxis:{data:this.feeList.map(n=>n.title)},yAxis:{},series:[{name:"消费",type:"bar",data:this.feeList.map(n=>n.value)}]}),c.init(document.getElementById("myChartLine")).setOption({title:{text:"日常消费"},tooltip:{},xAxis:{data:this.feeList.map(n=>n.title)},yAxis:{},series:[{name:"消费",type:"line",data:this.feeList.map(n=>n.value)}]}),c.init(document.getElementById("myChartPie")).setOption({title:{text:"成绩分布"},tooltip:{},legend:{orient:"horizontal",x:"center",y:"bottom",data:this.markList.map(n=>n.title)},series:[{type:"pie",data:this.markList}]})},async uploadFile(){const e=document.querySelector("#file");if(e.files==null||e.files.length==0){d(this,"请选择文件！");return}(await S("photo/"+this.info.personId+".jpg",e.files[0])).code===0?d(this,"上传成功"):d(this,"上传失败")},downloadPdf(){const e=v("/api/student/getStudentIntroduceItextPdf",this.info.num+".pdf",{studentId:this.studentId});console.log(e)},onSuccess(e){e.code==0?d(this,"上传成功！"):d(this,e.msg)}}});const i=e=>(F("data-v-3212a38f"),e=e(),C(),e),k={class:"base_form"},D=i(()=>t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"个人画像")],-1)),P={class:"table_center",style:{"margin-top":"5px"}},N={class:"content"},$=i(()=>t("td",null,"学号",-1)),j=i(()=>t("td",null,"姓名",-1)),z=i(()=>t("td",null,"学院",-1)),H={rowspan:"3"},O=["src"],V=i(()=>t("td",null,"专业",-1)),q=i(()=>t("td",null,"班级",-1)),R=i(()=>t("td",null,"证件号码",-1)),T=i(()=>t("td",null,"性别",-1)),W=i(()=>t("td",null,"出生日期",-1)),G=i(()=>t("td",null,"邮箱",-1)),J=i(()=>t("td",null,"电话",-1)),K=i(()=>t("td",null,"地址",-1)),M={colspan:"3"},Q=i(()=>t("input",{style:{"margin-left":"10px"},type:"file",id:"file",accept:".jpg"},null,-1)),U={class:"table_center",style:{"margin-top":"5px"}},X={class:"content"},Y=i(()=>t("tr",null,[t("td",{width:"5%"},"课程号"),t("td",{width:"5%"},"课程名"),t("td",{width:"5%"},"学分"),t("td",{width:"5%"},"成绩"),t("td",{width:"5%"},"排名")],-1)),Z=i(()=>t("div",{style:{width:"60%"}},[t("div",{id:"myChartBar",style:{width:"300px",height:"300px"}}),t("div",{id:"myChartPie",style:{width:"300px",height:"300px"}}),t("div",{id:"myChartLine",style:{width:"300px",height:"300px"}})],-1));function tt(e,a,y,n,et,st){const p=m("el-button"),g=m("el-upload");return h(),o(f,null,[t("div",k,[D,t("div",P,[t("table",N,[t("tr",null,[$,t("td",null,s(e.info.num),1),j,t("td",null,s(e.info.name),1),z,t("td",null,s(e.info.dept),1),t("td",H,[t("img",{src:e.imgStr,alt:"个人照片",width:"200"},null,8,O)])]),t("tr",null,[V,t("td",null,s(e.info.major),1),q,t("td",null,s(e.info.className),1),R,t("td",null,s(e.info.card),1)]),t("tr",null,[T,t("td",null,s(e.info.genderName),1),W,t("td",null,s(e.info.birthday),1),G,t("td",null,s(e.info.email),1)]),t("tr",null,[J,t("td",null,s(e.info.phone),1),K,t("td",M,s(e.info.address),1),t("td",null,[Q,t("input",{type:"button",value:"图片上传",onClick:a[0]||(a[0]=l=>e.uploadFile())})])])])]),t("div",U,[t("table",X,[Y,(h(!0),o(f,null,L(e.scoreList,l=>(h(),o("tr",{key:l.studentId},[t("td",null,s(l.courseNum),1),t("td",null,s(l.courseName),1),t("td",null,s(l.credit),1),t("td",null,s(l.mark),1),t("td",null,s(l.ranking),1)]))),128))])]),Z]),t("div",null,[u(g,{style:{display:"inline-block","margin-left":"5px"},headers:e.authHeader,action:"/api/student/importFeeDataWeb",data:{studentId:e.studentId},accept:".xlsx,.xls","show-file-list":!0,limit:1,multiple:!1,"on-success":e.onSuccess},{default:r(()=>[u(p,{size:"small",class:"spacial"},{default:r(()=>[_("消费记录上传")]),_:1})]),_:1},8,["headers","data","on-success"]),u(p,{style:{"margin-left":"5px"},size:"small",class:"spacial",onClick:a[1]||(a[1]=l=>e.downloadPdf())},{default:r(()=>[_("附件下载")]),_:1})])],64)}const dt=w(x,[["render",tt],["__scopeId","data-v-3212a38f"]]);export{dt as default};
